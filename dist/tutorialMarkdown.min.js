(function () {
  'use strict';

  var classCallCheck = function (instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  };

  var createClass = function () {
    function defineProperties(target, props) {
      for (var i = 0; i < props.length; i++) {
        var descriptor = props[i];
        descriptor.enumerable = descriptor.enumerable || false;
        descriptor.configurable = true;
        if ("value" in descriptor) descriptor.writable = true;
        Object.defineProperty(target, descriptor.key, descriptor);
      }
    }

    return function (Constructor, protoProps, staticProps) {
      if (protoProps) defineProperties(Constructor.prototype, protoProps);
      if (staticProps) defineProperties(Constructor, staticProps);
      return Constructor;
    };
  }();

  var EditorManager = function () {
    function EditorManager(options) {
      classCallCheck(this, EditorManager);


      this.hasTyped = false;
      this.setupEditor(options.editorElement);
    }

    createClass(EditorManager, [{
      key: "setupEditor",
      value: function setupEditor(editorElement) {

        // self.MonacoEnvironment = {
        //   getWorkerUrl: function (moduleId, label) {
        //     return './editor.worker.bundle.js';
        //   }
        // }

        // this.editor = monaco.editor.create(editorElement, {
        //   value: [
        //     '// Welcome to Tutorial Markdown.',
        //     '// start scrolling, and we\'ll',
        //     '// write the code.'
        //   ].join('\n'),
        //   lineNumbersMinChars: 3,
        //   scrollBeyondLastLine: false,
        //   language: 'javascript',
        //   fontSize: 10,
        //   minimap: { enabled: false },
        //   hover: false,
        //   occurrencesHighlight: false
        // });

        // this.editor.onKeyDown(function(e) {
        //   this.hasTyped = true;
        // }.bind(this))

        // this.editor.getModel().updateOptions({ tabSize: 2 })
      }
    }]);
    return EditorManager;
  }();

  var TutorialMarkdown = function () {
    function TutorialMarkdown(options) {
      var _this = this;

      classCallCheck(this, TutorialMarkdown);


      // Options
      var fakeOptions = {
        editor: options.editor, //{monaco editor, created and on the document}
        markdownSelector: {
          block: '.tmd', // Selector for code blocks in the tutorial
          code: '.code' // Selector for the code WITHIN the block
        },
        triggerPosition: 0.5, // position on screen for code to trigger.
        iframe: options.executionWindow
      };

      this.scheduled = false;

      window.addEventListener('scroll', this.throttleOnScroll);

      // Throttled Scroll
      this.throttleOnScroll = function (event) {
        if (!_this.scheduled) {
          _this.scheduled = true;
          window.requestAnimationFrame(function () {
            _this.scheduled = false;
            _this.onScroll();
          });
        }
      };

      // this
      // -- Manages scrolls, 

      // this.editorManager = new EditorManager(options);
      // -- Used to send code to the editor
      // -- Used to erase code from the editor

      // this.codeManager = new codeManager(options);

    }

    createClass(TutorialMarkdown, [{
      key: 'onScroll',
      value: function onScroll() {
        console.log("hi");
      }
    }, {
      key: 'destroy',
      value: function destroy() {
        window.removeEventListener('scroll', this.onScroll);
      }
    }]);
    return TutorialMarkdown;
  }();

  module.exports = TutorialMarkdown;

}());
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidHV0b3JpYWxNYXJrZG93bi5taW4uanMiLCJzb3VyY2VzIjpbIi4uL3NyYy9lZGl0b3JNYW5hZ2VyLmpzIiwiLi4vc3JjL3R1dG9yaWFsTWFya2Rvd24uanMiLCIuLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiXG5jbGFzcyBFZGl0b3JNYW5hZ2VyIHtcblxuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG5cbiAgICB0aGlzLmhhc1R5cGVkID0gZmFsc2U7XG4gICAgdGhpcy5zZXR1cEVkaXRvcihvcHRpb25zLmVkaXRvckVsZW1lbnQpO1xuICB9XG5cbiAgc2V0dXBFZGl0b3IoIGVkaXRvckVsZW1lbnQgKSB7XG4gICAgXG4gICAgLy8gc2VsZi5Nb25hY29FbnZpcm9ubWVudCA9IHtcbiAgICAvLyAgIGdldFdvcmtlclVybDogZnVuY3Rpb24gKG1vZHVsZUlkLCBsYWJlbCkge1xuICAgIC8vICAgICByZXR1cm4gJy4vZWRpdG9yLndvcmtlci5idW5kbGUuanMnO1xuICAgIC8vICAgfVxuICAgIC8vIH1cblxuICAgIC8vIHRoaXMuZWRpdG9yID0gbW9uYWNvLmVkaXRvci5jcmVhdGUoZWRpdG9yRWxlbWVudCwge1xuICAgIC8vICAgdmFsdWU6IFtcbiAgICAvLyAgICAgJy8vIFdlbGNvbWUgdG8gVHV0b3JpYWwgTWFya2Rvd24uJyxcbiAgICAvLyAgICAgJy8vIHN0YXJ0IHNjcm9sbGluZywgYW5kIHdlXFwnbGwnLFxuICAgIC8vICAgICAnLy8gd3JpdGUgdGhlIGNvZGUuJ1xuICAgIC8vICAgXS5qb2luKCdcXG4nKSxcbiAgICAvLyAgIGxpbmVOdW1iZXJzTWluQ2hhcnM6IDMsXG4gICAgLy8gICBzY3JvbGxCZXlvbmRMYXN0TGluZTogZmFsc2UsXG4gICAgLy8gICBsYW5ndWFnZTogJ2phdmFzY3JpcHQnLFxuICAgIC8vICAgZm9udFNpemU6IDEwLFxuICAgIC8vICAgbWluaW1hcDogeyBlbmFibGVkOiBmYWxzZSB9LFxuICAgIC8vICAgaG92ZXI6IGZhbHNlLFxuICAgIC8vICAgb2NjdXJyZW5jZXNIaWdobGlnaHQ6IGZhbHNlXG4gICAgLy8gfSk7XG5cbiAgICAvLyB0aGlzLmVkaXRvci5vbktleURvd24oZnVuY3Rpb24oZSkge1xuICAgIC8vICAgdGhpcy5oYXNUeXBlZCA9IHRydWU7XG4gICAgLy8gfS5iaW5kKHRoaXMpKVxuXG4gICAgLy8gdGhpcy5lZGl0b3IuZ2V0TW9kZWwoKS51cGRhdGVPcHRpb25zKHsgdGFiU2l6ZTogMiB9KVxuICB9XG59XG5cblxuZXhwb3J0IGRlZmF1bHQgRWRpdG9yTWFuYWdlcjtcblxuLy8gLy8gKGZ1bmN0aW9uKCkge1xuXG4vLyAgIC8vIEVkaXRvciB2YXJpYWJsZXNcbi8vICAgdmFyIGZyYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaWZyYW1lJyk7XG4vLyAgIHZhciBlZGl0b3I7XG5cbi8vICAgLy8gQ29kZSB2YXJpYWJsZXNcbi8vICAgdmFyIGNvbnRlbnRFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbnRlbnQnKTtcbi8vICAgdmFyIHRyaWdnZXJzLCBibG9ja3MsIHN0cnVjdHVyZSwgc2VuZEl0QnV0dG9uLCBmdWxsQ29kZVNldHM7XG4vLyAgIHZhciBjdXJyZW50U3RlcCA9IC0xO1xuLy8gICB2YXIgaGFzVHlwZWQgPSBmYWxzZTtcblxuLy8gICBmdW5jdGlvbiBzZXR1cCgpIHtcbi8vICAgICBzZXR1cENvZGUoKTtcbi8vICAgfVxuXG4vLyAgIGZ1bmN0aW9uIHNldHVwQ29kZSgpIHtcbi8vICAgICByZXF1aXJlLmNvbmZpZyh7IHBhdGhzOiB7ICd2cyc6ICcvanMvbGlicy9tb25hY28tZWRpdG9yL3ZzJyB9fSk7XG4vLyAgICAgcmVxdWlyZShbJ3ZzL2VkaXRvci9lZGl0b3IubWFpbiddLCBmdW5jdGlvbigpIHtcbi8vICAgICAgIGVkaXRvciA9IG1vbmFjby5lZGl0b3IuY3JlYXRlKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb2RlLWFyZWEnKSwge1xuLy8gICAgICAgICB2YWx1ZTogW1xuLy8gICAgICAgICAgICcvLyBXZWxjb21lIHRvIFR1dG9yaWFsIE1hcmtkb3duLicsXG4vLyAgICAgICAgICAgJy8vIHN0YXJ0IHNjcm9sbGluZywgYW5kIHdlXFwnbGwnLFxuLy8gICAgICAgICAgICcvLyB3cml0ZSB0aGUgY29kZS4nXG4vLyAgICAgICAgIF0uam9pbignXFxuJyksXG4vLyAgICAgICAgIGxpbmVOdW1iZXJzTWluQ2hhcnM6IDMsXG4vLyAgICAgICAgIHNjcm9sbEJleW9uZExhc3RMaW5lOiBmYWxzZSxcbi8vICAgICAgICAgbGFuZ3VhZ2U6ICdqYXZhc2NyaXB0Jyxcbi8vICAgICAgICAgZm9udFNpemU6IDEwLFxuLy8gICAgICAgICBtaW5pbWFwOiB7XG4vLyAgICAgICAgICAgZW5hYmxlZDogZmFsc2Vcbi8vICAgICAgICAgfSxcbi8vICAgICAgICAgaG92ZXI6IGZhbHNlLFxuLy8gICAgICAgICBvY2N1cnJlbmNlc0hpZ2hsaWdodDogZmFsc2Vcbi8vICAgICAgIH0pO1xuXG4vLyAgICAgICBlZGl0b3Iub25LZXlEb3duKGZ1bmN0aW9uKGUpIHtcbi8vICAgICAgICAgaGFzVHlwZWQgPSB0cnVlO1xuLy8gICAgICAgfSlcblxuLy8gICAgICAgZWRpdG9yLmdldE1vZGVsKCkudXBkYXRlT3B0aW9ucyh7IHRhYlNpemU6IDIgfSlcblxuLy8gICAgICAgc2V0dXBUdXRvcmlhbCgpO1xuLy8gICAgIH0pO1xuXG4vLyAgICAgYmluZCgpO1xuLy8gICB9XG5cbi8vICAgZnVuY3Rpb24gc2V0dXBUdXRvcmlhbCgpIHtcblxuLy8gICAgIHNlbmRJdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zZW5kLWl0Jyk7XG4vLyAgICAgc2VuZEl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgc2VuZENvZGUpO1xuXG4vLyAgICAgc3RydWN0dXJlID0gW107XG4vLyAgICAgZnVsbENvZGVTZXRzID0ge307XG5cbi8vICAgICBzYXZlQ29kZShjdXJyZW50U3RlcClcblxuLy8gICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBvbkNvbnRlbnRTY3JvbGwpO1xuLy8gICAgIHRyaWdnZXJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnRtZC10cmlnZ2VyJyk7XG4vLyAgICAgYmxvY2tzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnRtZCcpO1xuLy8gICAgIGZvciggdmFyIGkgPSAwOyBpIDwgYmxvY2tzLmxlbmd0aDsgaSsrICkge1xuLy8gICAgICAgdmFyIGJsb2NrRWxlbWVudCA9IGJsb2Nrc1tpXTtcbiAgICAgIFxuLy8gICAgICAgdmFyIGJsb2NrU3RydWN0dXJlID0ge1xuLy8gICAgICAgICBjb2RlOiBibG9ja0VsZW1lbnQuaW5uZXJIVE1MLnJlcGxhY2UoJyZndDsnLCAnPicpLnJlcGxhY2UoJyZsdDsnLCAnPCcpLnJlcGxhY2UoJyZsdDsnLCAnPCcpLFxuLy8gICAgICAgICBhY3Rpb246IGJsb2NrRWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtYWN0aW9uJyksXG4vLyAgICAgICAgIGZyb206IHBhcnNlSW50KGJsb2NrRWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtZnJvbScpKSxcbi8vICAgICAgICAgdG86IGJsb2NrRWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtdG8nKSxcbi8vICAgICAgICAgbGluZXM6IGJsb2NrRWxlbWVudC5pbm5lckhUTUwuc3BsaXQoJ1xcbicpLmxlbmd0aFxuLy8gICAgICAgfVxuXG4vLyAgICAgICBpZiggYmxvY2tTdHJ1Y3R1cmUudG8gPT09ICdhbGwnICkge1xuLy8gICAgICAgICBibG9ja1N0cnVjdHVyZS50byA9IHBhcnNlSW50KGJsb2NrU3RydWN0dXJlLmZyb20pICsgYmxvY2tTdHJ1Y3R1cmUuY29kZS5zcGxpdCgnXFxuJykubGVuZ3RoXG4vLyAgICAgICB9IGVsc2Uge1xuLy8gICAgICAgICBibG9ja1N0cnVjdHVyZS50byA9IHBhcnNlSW50KGJsb2NrU3RydWN0dXJlLnRvKTtcbi8vICAgICAgIH1cblxuLy8gICAgICAgc3RydWN0dXJlLnB1c2goYmxvY2tTdHJ1Y3R1cmUpXG4vLyAgICAgfVxuXG4vLyAgIH1cblxuLy8gICBmdW5jdGlvbiBvbkNvbnRlbnRTY3JvbGwoZSkge1xuXG4vLyAgICAgdmFyIGhpdFN0ZXBzID0gLTE7XG5cbi8vICAgICBmb3IoIHZhciBpID0gMDsgaSA8IHRyaWdnZXJzLmxlbmd0aDsgaSsrKSB7XG4vLyAgICAgICB2YXIgZGltZW5zaW9ucyA9IHRyaWdnZXJzW2ldLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuLy8gICAgICAgdmFyIGhlYWRlckhlaWdodCA9IDY1OyAvLyB0b2RvLCBub3QgcHV0IGhlcmUuXG5cbi8vICAgICAgIGlmKCBkaW1lbnNpb25zLnkgKyBkaW1lbnNpb25zLmhlaWdodC8zIDwgKCh3aW5kb3cuaW5uZXJIZWlnaHQgLSBoZWFkZXJIZWlnaHQpIC8gMiArIGhlYWRlckhlaWdodCkpIHtcbiAgICAgICAgXG4vLyAgICAgICAgIGlmKCBpID09PSBjdXJyZW50U3RlcCArIDEgKSB7XG4vLyAgICAgICAgICAgY3VycmVudFN0ZXAgPSBpO1xuLy8gICAgICAgICAgIG9uQ29kZUFkZChpKTtcbi8vICAgICAgICAgfVxuXG4vLyAgICAgICAgIGhpdFN0ZXBzID0gaTtcbi8vICAgICAgIH1cbi8vICAgICB9XG5cbi8vICAgICBpZiggaGl0U3RlcHMgPT09IGN1cnJlbnRTdGVwIC0gMSkge1xuLy8gICAgICAgY3VycmVudFN0ZXAgPSBjdXJyZW50U3RlcCAtIDE7XG4vLyAgICAgICBvbkNvZGVSZW1vdmUoY3VycmVudFN0ZXAgKyAxKTtcbi8vICAgICAgIHNlbmRDb2RlKGN1cnJlbnRTdGVwKTtcbi8vICAgICB9XG4vLyAgIH1cblxuLy8gICBmdW5jdGlvbiBvbkNvZGVSZW1vdmUoc3RlcCkge1xuLy8gICAgIHZhciByYW5nZSA9IG5ldyBtb25hY28uUmFuZ2UoMCwgMSwgOTk5LCAxKTtcbi8vICAgICB2YXIgaWQgPSB7IG1ham9yOiAxLCBtaW5vcjogMSB9OyAgICAgICAgICAgXG4vLyAgICAgdmFyIG9wID0ge2lkZW50aWZpZXI6IGlkLCByYW5nZTogcmFuZ2UsIHRleHQ6IGZ1bGxDb2RlU2V0c1tzdGVwIC0gMV0sIGZvcmNlTW92ZU1hcmtlcnM6IHRydWV9O1xuLy8gICAgIGVkaXRvci5leGVjdXRlRWRpdHMoZnVsbENvZGVTZXRzW3N0ZXAgLSAxXSwgW29wXSk7XG4vLyAgICAgaGFzVHlwZWQgPSBmYWxzZTtcbi8vICAgfVxuXG4vLyAgIGZ1bmN0aW9uIG9uQ29kZUFkZChzdGVwKSB7XG5cbi8vICAgICBpZiggaGFzVHlwZWQgPT09IHRydWUgKSB7XG4vLyAgICAgICBvbkNvZGVSZW1vdmUoc3RlcCk7XG4vLyAgICAgfVxuXG4vLyAgICAgLy8gUG9zaXRpb25pbmcgdGhlIGluc3RydWN0aW9uc1xuLy8gICAgIHZhciBpbnN0cnVjdGlvbnMgPSBzdHJ1Y3R1cmVbc3RlcF07XG5cbi8vICAgICB2YXIgcmFuZ2UgPSBuZXcgbW9uYWNvLlJhbmdlKGluc3RydWN0aW9ucy5mcm9tLCAxLCBpbnN0cnVjdGlvbnMudG8sIDEpO1xuLy8gICAgIHZhciBpZCA9IHsgbWFqb3I6IDEsIG1pbm9yOiAxIH07ICAgICAgICAgICBcbi8vICAgICB2YXIgb3AgPSB7aWRlbnRpZmllcjogaWQsIHJhbmdlOiByYW5nZSwgdGV4dDogaW5zdHJ1Y3Rpb25zLmNvZGUsIGZvcmNlTW92ZU1hcmtlcnM6IHRydWV9O1xuLy8gICAgIGVkaXRvci5leGVjdXRlRWRpdHMoaW5zdHJ1Y3Rpb25zLmNvZGUsIFtvcF0pO1xuXG4vLyAgICAgZWRpdG9yLnJldmVhbExpbmVzKGluc3RydWN0aW9ucy5mcm9tLCBpbnN0cnVjdGlvbnMuZnJvbSArIGluc3RydWN0aW9ucy5saW5lcyk7XG4vLyAgICAgc2VuZENvZGUoKTtcbi8vICAgICBzYXZlQ29kZShzdGVwKTtcbi8vICAgfVxuXG4vLyAgIGZ1bmN0aW9uIG9uQ29kZVJldmVyc2Uoc3RlcCkge1xuLy8gICAgIGNvbnNvbGUubG9nKFwicmVtb3ZlIVwiKTtcbi8vICAgfVxuXG4vLyAgIGZ1bmN0aW9uIHNlbmRDb2RlKCkge1xuLy8gICAgIHZhciB2YWx1ZSA9IGVkaXRvci5nZXRWYWx1ZSgpXG4gICAgXG4vLyAgICAgZnJhbWUuY29udGVudFdpbmRvdy5wb3N0TWVzc2FnZSh2YWx1ZSwgXCIqXCIpXG4vLyAgIH1cblxuLy8gICBmdW5jdGlvbiBzYXZlQ29kZShzdGVwKSB7XG5cbi8vICAgICAvLyBPbmx5IHNhdmUgdGhlc2Ugb25lcyBwZXIgZWFjaCBzdGVwLlxuLy8gICAgIGlmKCAhZnVsbENvZGVTZXRzW3N0ZXBdICkge1xuLy8gICAgICAgZnVsbENvZGVTZXRzW3N0ZXBdID0gZWRpdG9yLmdldFZhbHVlKCk7XG4vLyAgICAgfVxuXG4vLyAgIH1cblxuLy8gICBmdW5jdGlvbiBiaW5kKCkge31cblxuLy8gICBzZXR1cCgpO1xuXG4vLyAvLyB9KSgpO1xuIiwiaW1wb3J0IENvZGVNYW5hZ2VyIGZyb20gJy4vY29kZU1hbmFnZXInO1xuaW1wb3J0IEVkaXRvck1hbmFnZXIgZnJvbSAnLi9lZGl0b3JNYW5hZ2VyJztcblxuY2xhc3MgVHV0b3JpYWxNYXJrZG93biB7XG5cbiAgXG5cbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuXG4gICAgLy8gT3B0aW9uc1xuICAgIGxldCBmYWtlT3B0aW9ucyA9IHtcbiAgICAgIGVkaXRvcjogb3B0aW9ucy5lZGl0b3IsIC8ve21vbmFjbyBlZGl0b3IsIGNyZWF0ZWQgYW5kIG9uIHRoZSBkb2N1bWVudH1cbiAgICAgIG1hcmtkb3duU2VsZWN0b3I6IHtcbiAgICAgICAgYmxvY2s6ICcudG1kJywgLy8gU2VsZWN0b3IgZm9yIGNvZGUgYmxvY2tzIGluIHRoZSB0dXRvcmlhbFxuICAgICAgICBjb2RlOiAnLmNvZGUnIC8vIFNlbGVjdG9yIGZvciB0aGUgY29kZSBXSVRISU4gdGhlIGJsb2NrXG4gICAgICB9LFxuICAgICAgdHJpZ2dlclBvc2l0aW9uOiAwLjUsIC8vIHBvc2l0aW9uIG9uIHNjcmVlbiBmb3IgY29kZSB0byB0cmlnZ2VyLlxuICAgICAgaWZyYW1lOiBvcHRpb25zLmV4ZWN1dGlvbldpbmRvdyxcbiAgICB9XG5cbiAgICB0aGlzLnNjaGVkdWxlZCA9IGZhbHNlO1xuXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHRoaXMudGhyb3R0bGVPblNjcm9sbCk7XG5cbiAgICAvLyBUaHJvdHRsZWQgU2Nyb2xsXG4gICAgdGhpcy50aHJvdHRsZU9uU2Nyb2xsID0gKGV2ZW50KSA9PiB7XG4gICAgICBpZiAoIXRoaXMuc2NoZWR1bGVkKSB7XG4gICAgICAgIHRoaXMuc2NoZWR1bGVkID0gdHJ1ZTtcbiAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgICAgdGhpcy5zY2hlZHVsZWQgPSBmYWxzZTtcbiAgICAgICAgICB0aGlzLm9uU2Nyb2xsKCk7XG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gdGhpc1xuICAgIC8vIC0tIE1hbmFnZXMgc2Nyb2xscywgXG5cbiAgICAvLyB0aGlzLmVkaXRvck1hbmFnZXIgPSBuZXcgRWRpdG9yTWFuYWdlcihvcHRpb25zKTtcbiAgICAvLyAtLSBVc2VkIHRvIHNlbmQgY29kZSB0byB0aGUgZWRpdG9yXG4gICAgLy8gLS0gVXNlZCB0byBlcmFzZSBjb2RlIGZyb20gdGhlIGVkaXRvclxuXG4gICAgLy8gdGhpcy5jb2RlTWFuYWdlciA9IG5ldyBjb2RlTWFuYWdlcihvcHRpb25zKTtcblxuICAgIFxuICB9XG5cblxuXG4gIG9uU2Nyb2xsKCl7XG4gICAgY29uc29sZS5sb2coXCJoaVwiKTtcbiAgfVxuXG4gIGRlc3Ryb3koKSB7XG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHRoaXMub25TY3JvbGwpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFR1dG9yaWFsTWFya2Rvd247XG5cblxuLy8gLy8gKGZ1bmN0aW9uKCkge1xuXG4vLyAgIC8vIEVkaXRvciB2YXJpYWJsZXNcbi8vICAgdmFyIGZyYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaWZyYW1lJyk7XG4vLyAgIHZhciBlZGl0b3I7XG5cbi8vICAgLy8gQ29kZSB2YXJpYWJsZXNcbi8vICAgdmFyIGNvbnRlbnRFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbnRlbnQnKTtcbi8vICAgdmFyIHRyaWdnZXJzLCBibG9ja3MsIHN0cnVjdHVyZSwgc2VuZEl0QnV0dG9uLCBmdWxsQ29kZVNldHM7XG4vLyAgIHZhciBjdXJyZW50U3RlcCA9IC0xO1xuLy8gICB2YXIgaGFzVHlwZWQgPSBmYWxzZTtcblxuLy8gICBmdW5jdGlvbiBzZXR1cCgpIHtcbi8vICAgICBzZXR1cENvZGUoKTtcbi8vICAgfVxuXG4vLyAgIGZ1bmN0aW9uIHNldHVwQ29kZSgpIHtcbi8vICAgICByZXF1aXJlLmNvbmZpZyh7IHBhdGhzOiB7ICd2cyc6ICcvanMvbGlicy9tb25hY28tZWRpdG9yL3ZzJyB9fSk7XG4vLyAgICAgcmVxdWlyZShbJ3ZzL2VkaXRvci9lZGl0b3IubWFpbiddLCBmdW5jdGlvbigpIHtcbi8vICAgICAgIGVkaXRvciA9IG1vbmFjby5lZGl0b3IuY3JlYXRlKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb2RlLWFyZWEnKSwge1xuLy8gICAgICAgICB2YWx1ZTogW1xuLy8gICAgICAgICAgICcvLyBXZWxjb21lIHRvIFR1dG9yaWFsIE1hcmtkb3duLicsXG4vLyAgICAgICAgICAgJy8vIHN0YXJ0IHNjcm9sbGluZywgYW5kIHdlXFwnbGwnLFxuLy8gICAgICAgICAgICcvLyB3cml0ZSB0aGUgY29kZS4nXG4vLyAgICAgICAgIF0uam9pbignXFxuJyksXG4vLyAgICAgICAgIGxpbmVOdW1iZXJzTWluQ2hhcnM6IDMsXG4vLyAgICAgICAgIHNjcm9sbEJleW9uZExhc3RMaW5lOiBmYWxzZSxcbi8vICAgICAgICAgbGFuZ3VhZ2U6ICdqYXZhc2NyaXB0Jyxcbi8vICAgICAgICAgZm9udFNpemU6IDEwLFxuLy8gICAgICAgICBtaW5pbWFwOiB7XG4vLyAgICAgICAgICAgZW5hYmxlZDogZmFsc2Vcbi8vICAgICAgICAgfSxcbi8vICAgICAgICAgaG92ZXI6IGZhbHNlLFxuLy8gICAgICAgICBvY2N1cnJlbmNlc0hpZ2hsaWdodDogZmFsc2Vcbi8vICAgICAgIH0pO1xuXG4vLyAgICAgICBlZGl0b3Iub25LZXlEb3duKGZ1bmN0aW9uKGUpIHtcbi8vICAgICAgICAgaGFzVHlwZWQgPSB0cnVlO1xuLy8gICAgICAgfSlcblxuLy8gICAgICAgZWRpdG9yLmdldE1vZGVsKCkudXBkYXRlT3B0aW9ucyh7IHRhYlNpemU6IDIgfSlcblxuLy8gICAgICAgc2V0dXBUdXRvcmlhbCgpO1xuLy8gICAgIH0pO1xuXG4vLyAgICAgYmluZCgpO1xuLy8gICB9XG5cbi8vICAgZnVuY3Rpb24gc2V0dXBUdXRvcmlhbCgpIHtcblxuLy8gICAgIHNlbmRJdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zZW5kLWl0Jyk7XG4vLyAgICAgc2VuZEl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgc2VuZENvZGUpO1xuXG4vLyAgICAgc3RydWN0dXJlID0gW107XG4vLyAgICAgZnVsbENvZGVTZXRzID0ge307XG5cbi8vICAgICBzYXZlQ29kZShjdXJyZW50U3RlcClcblxuLy8gICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBvbkNvbnRlbnRTY3JvbGwpO1xuLy8gICAgIHRyaWdnZXJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnRtZC10cmlnZ2VyJyk7XG4vLyAgICAgYmxvY2tzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnRtZCcpO1xuLy8gICAgIGZvciggdmFyIGkgPSAwOyBpIDwgYmxvY2tzLmxlbmd0aDsgaSsrICkge1xuLy8gICAgICAgdmFyIGJsb2NrRWxlbWVudCA9IGJsb2Nrc1tpXTtcbiAgICAgIFxuLy8gICAgICAgdmFyIGJsb2NrU3RydWN0dXJlID0ge1xuLy8gICAgICAgICBjb2RlOiBibG9ja0VsZW1lbnQuaW5uZXJIVE1MLnJlcGxhY2UoJyZndDsnLCAnPicpLnJlcGxhY2UoJyZsdDsnLCAnPCcpLnJlcGxhY2UoJyZsdDsnLCAnPCcpLFxuLy8gICAgICAgICBhY3Rpb246IGJsb2NrRWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtYWN0aW9uJyksXG4vLyAgICAgICAgIGZyb206IHBhcnNlSW50KGJsb2NrRWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtZnJvbScpKSxcbi8vICAgICAgICAgdG86IGJsb2NrRWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtdG8nKSxcbi8vICAgICAgICAgbGluZXM6IGJsb2NrRWxlbWVudC5pbm5lckhUTUwuc3BsaXQoJ1xcbicpLmxlbmd0aFxuLy8gICAgICAgfVxuXG4vLyAgICAgICBpZiggYmxvY2tTdHJ1Y3R1cmUudG8gPT09ICdhbGwnICkge1xuLy8gICAgICAgICBibG9ja1N0cnVjdHVyZS50byA9IHBhcnNlSW50KGJsb2NrU3RydWN0dXJlLmZyb20pICsgYmxvY2tTdHJ1Y3R1cmUuY29kZS5zcGxpdCgnXFxuJykubGVuZ3RoXG4vLyAgICAgICB9IGVsc2Uge1xuLy8gICAgICAgICBibG9ja1N0cnVjdHVyZS50byA9IHBhcnNlSW50KGJsb2NrU3RydWN0dXJlLnRvKTtcbi8vICAgICAgIH1cblxuLy8gICAgICAgc3RydWN0dXJlLnB1c2goYmxvY2tTdHJ1Y3R1cmUpXG4vLyAgICAgfVxuXG4vLyAgIH1cblxuLy8gICBmdW5jdGlvbiBvbkNvbnRlbnRTY3JvbGwoZSkge1xuXG4vLyAgICAgdmFyIGhpdFN0ZXBzID0gLTE7XG5cbi8vICAgICBmb3IoIHZhciBpID0gMDsgaSA8IHRyaWdnZXJzLmxlbmd0aDsgaSsrKSB7XG4vLyAgICAgICB2YXIgZGltZW5zaW9ucyA9IHRyaWdnZXJzW2ldLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuLy8gICAgICAgdmFyIGhlYWRlckhlaWdodCA9IDY1OyAvLyB0b2RvLCBub3QgcHV0IGhlcmUuXG5cbi8vICAgICAgIGlmKCBkaW1lbnNpb25zLnkgKyBkaW1lbnNpb25zLmhlaWdodC8zIDwgKCh3aW5kb3cuaW5uZXJIZWlnaHQgLSBoZWFkZXJIZWlnaHQpIC8gMiArIGhlYWRlckhlaWdodCkpIHtcbiAgICAgICAgXG4vLyAgICAgICAgIGlmKCBpID09PSBjdXJyZW50U3RlcCArIDEgKSB7XG4vLyAgICAgICAgICAgY3VycmVudFN0ZXAgPSBpO1xuLy8gICAgICAgICAgIG9uQ29kZUFkZChpKTtcbi8vICAgICAgICAgfVxuXG4vLyAgICAgICAgIGhpdFN0ZXBzID0gaTtcbi8vICAgICAgIH1cbi8vICAgICB9XG5cbi8vICAgICBpZiggaGl0U3RlcHMgPT09IGN1cnJlbnRTdGVwIC0gMSkge1xuLy8gICAgICAgY3VycmVudFN0ZXAgPSBjdXJyZW50U3RlcCAtIDE7XG4vLyAgICAgICBvbkNvZGVSZW1vdmUoY3VycmVudFN0ZXAgKyAxKTtcbi8vICAgICAgIHNlbmRDb2RlKGN1cnJlbnRTdGVwKTtcbi8vICAgICB9XG4vLyAgIH1cblxuLy8gICBmdW5jdGlvbiBvbkNvZGVSZW1vdmUoc3RlcCkge1xuLy8gICAgIHZhciByYW5nZSA9IG5ldyBtb25hY28uUmFuZ2UoMCwgMSwgOTk5LCAxKTtcbi8vICAgICB2YXIgaWQgPSB7IG1ham9yOiAxLCBtaW5vcjogMSB9OyAgICAgICAgICAgXG4vLyAgICAgdmFyIG9wID0ge2lkZW50aWZpZXI6IGlkLCByYW5nZTogcmFuZ2UsIHRleHQ6IGZ1bGxDb2RlU2V0c1tzdGVwIC0gMV0sIGZvcmNlTW92ZU1hcmtlcnM6IHRydWV9O1xuLy8gICAgIGVkaXRvci5leGVjdXRlRWRpdHMoZnVsbENvZGVTZXRzW3N0ZXAgLSAxXSwgW29wXSk7XG4vLyAgICAgaGFzVHlwZWQgPSBmYWxzZTtcbi8vICAgfVxuXG4vLyAgIGZ1bmN0aW9uIG9uQ29kZUFkZChzdGVwKSB7XG5cbi8vICAgICBpZiggaGFzVHlwZWQgPT09IHRydWUgKSB7XG4vLyAgICAgICBvbkNvZGVSZW1vdmUoc3RlcCk7XG4vLyAgICAgfVxuXG4vLyAgICAgLy8gUG9zaXRpb25pbmcgdGhlIGluc3RydWN0aW9uc1xuLy8gICAgIHZhciBpbnN0cnVjdGlvbnMgPSBzdHJ1Y3R1cmVbc3RlcF07XG5cbi8vICAgICB2YXIgcmFuZ2UgPSBuZXcgbW9uYWNvLlJhbmdlKGluc3RydWN0aW9ucy5mcm9tLCAxLCBpbnN0cnVjdGlvbnMudG8sIDEpO1xuLy8gICAgIHZhciBpZCA9IHsgbWFqb3I6IDEsIG1pbm9yOiAxIH07ICAgICAgICAgICBcbi8vICAgICB2YXIgb3AgPSB7aWRlbnRpZmllcjogaWQsIHJhbmdlOiByYW5nZSwgdGV4dDogaW5zdHJ1Y3Rpb25zLmNvZGUsIGZvcmNlTW92ZU1hcmtlcnM6IHRydWV9O1xuLy8gICAgIGVkaXRvci5leGVjdXRlRWRpdHMoaW5zdHJ1Y3Rpb25zLmNvZGUsIFtvcF0pO1xuXG4vLyAgICAgZWRpdG9yLnJldmVhbExpbmVzKGluc3RydWN0aW9ucy5mcm9tLCBpbnN0cnVjdGlvbnMuZnJvbSArIGluc3RydWN0aW9ucy5saW5lcyk7XG4vLyAgICAgc2VuZENvZGUoKTtcbi8vICAgICBzYXZlQ29kZShzdGVwKTtcbi8vICAgfVxuXG4vLyAgIGZ1bmN0aW9uIG9uQ29kZVJldmVyc2Uoc3RlcCkge1xuLy8gICAgIGNvbnNvbGUubG9nKFwicmVtb3ZlIVwiKTtcbi8vICAgfVxuXG4vLyAgIGZ1bmN0aW9uIHNlbmRDb2RlKCkge1xuLy8gICAgIHZhciB2YWx1ZSA9IGVkaXRvci5nZXRWYWx1ZSgpXG4gICAgXG4vLyAgICAgZnJhbWUuY29udGVudFdpbmRvdy5wb3N0TWVzc2FnZSh2YWx1ZSwgXCIqXCIpXG4vLyAgIH1cblxuLy8gICBmdW5jdGlvbiBzYXZlQ29kZShzdGVwKSB7XG5cbi8vICAgICAvLyBPbmx5IHNhdmUgdGhlc2Ugb25lcyBwZXIgZWFjaCBzdGVwLlxuLy8gICAgIGlmKCAhZnVsbENvZGVTZXRzW3N0ZXBdICkge1xuLy8gICAgICAgZnVsbENvZGVTZXRzW3N0ZXBdID0gZWRpdG9yLmdldFZhbHVlKCk7XG4vLyAgICAgfVxuXG4vLyAgIH1cblxuLy8gICBmdW5jdGlvbiBiaW5kKCkge31cblxuLy8gICBzZXR1cCgpO1xuXG4vLyAvLyB9KSgpO1xuIiwiXG5pbXBvcnQgVHV0b3JpYWxNYXJrZG93biBmcm9tICcuL3R1dG9yaWFsTWFya2Rvd24nXG5tb2R1bGUuZXhwb3J0cyA9IFR1dG9yaWFsTWFya2Rvd25cbiJdLCJuYW1lcyI6WyJFZGl0b3JNYW5hZ2VyIiwib3B0aW9ucyIsImhhc1R5cGVkIiwic2V0dXBFZGl0b3IiLCJlZGl0b3JFbGVtZW50IiwiVHV0b3JpYWxNYXJrZG93biIsImZha2VPcHRpb25zIiwiZWRpdG9yIiwibWFya2Rvd25TZWxlY3RvciIsImJsb2NrIiwiY29kZSIsInRyaWdnZXJQb3NpdGlvbiIsImlmcmFtZSIsImV4ZWN1dGlvbldpbmRvdyIsInNjaGVkdWxlZCIsIndpbmRvdyIsImFkZEV2ZW50TGlzdGVuZXIiLCJ0aHJvdHRsZU9uU2Nyb2xsIiwiZXZlbnQiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJvblNjcm9sbCIsImNvbnNvbGUiLCJsb2ciLCJyZW1vdmVFdmVudExpc3RlbmVyIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O01BQ01BO0VBRUoseUJBQVlDLE9BQVosRUFBcUI7RUFBQTs7O0VBRW5CLFNBQUtDLFFBQUwsR0FBZ0IsS0FBaEI7RUFDQSxTQUFLQyxXQUFMLENBQWlCRixRQUFRRyxhQUF6QjtFQUNEOzs7O2tDQUVZQSxlQUFnQjs7RUFFM0I7RUFDQTtFQUNBO0VBQ0E7RUFDQTs7RUFFQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBOztFQUVBO0VBQ0E7RUFDQTs7RUFFQTtFQUNEOzs7OztNQ2xDR0M7RUFJSiw0QkFBWUosT0FBWixFQUFxQjtFQUFBOztFQUFBOzs7RUFFbkI7RUFDQSxRQUFJSyxjQUFjO0VBQ2hCQyxjQUFRTixRQUFRTSxNQURBO0VBRWhCQyx3QkFBa0I7RUFDaEJDLGVBQU8sTUFEUztFQUVoQkMsY0FBTSxPQUZVO0VBQUEsT0FGRjtFQU1oQkMsdUJBQWlCLEdBTkQ7RUFPaEJDLGNBQVFYLFFBQVFZO0VBUEEsS0FBbEI7O0VBVUEsU0FBS0MsU0FBTCxHQUFpQixLQUFqQjs7RUFFQUMsV0FBT0MsZ0JBQVAsQ0FBd0IsUUFBeEIsRUFBa0MsS0FBS0MsZ0JBQXZDOztFQUVBO0VBQ0EsU0FBS0EsZ0JBQUwsR0FBd0IsVUFBQ0MsS0FBRCxFQUFXO0VBQ2pDLFVBQUksQ0FBQyxNQUFLSixTQUFWLEVBQXFCO0VBQ25CLGNBQUtBLFNBQUwsR0FBaUIsSUFBakI7RUFDQUMsZUFBT0kscUJBQVAsQ0FBNkIsWUFBTTtFQUNqQyxnQkFBS0wsU0FBTCxHQUFpQixLQUFqQjtFQUNBLGdCQUFLTSxRQUFMO0VBQ0QsU0FIRDtFQUlEO0VBQ0YsS0FSRDs7RUFVQTtFQUNBOztFQUVBO0VBQ0E7RUFDQTs7RUFFQTs7RUFHRDs7OztpQ0FJUztFQUNSQyxjQUFRQyxHQUFSLENBQVksSUFBWjtFQUNEOzs7Z0NBRVM7RUFDUlAsYUFBT1EsbUJBQVAsQ0FBMkIsUUFBM0IsRUFBcUMsS0FBS0gsUUFBMUM7RUFDRDs7Ozs7RUNyREhJLE9BQU9DLE9BQVAsR0FBaUJwQixnQkFBakI7Ozs7In0=
